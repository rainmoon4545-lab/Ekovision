# EkoVision Detection-Tracking-Trigger Configuration
# BALANCED MODE - Meningkatkan FPS TANPA mengorbankan akurasi
# Fokus: Optimasi teknis tanpa menurunkan kualitas deteksi/klasifikasi

# Camera Configuration
camera:
  index: 0 # Camera device index (0 = default, 1 = second camera, etc.)
  width: 640 # Frame width - TETAP 640 untuk akurasi
  height: 480 # Frame height - TETAP 480 untuk akurasi

# Detection Configuration
detection:
  confidence_threshold: 0.55 # YOLO confidence threshold - TETAP untuk akurasi
  iou_threshold: 0.45 # IoU threshold for NMS

# Trigger Zone Configuration
trigger_zone:
  x_offset_pct: 30.0 # X offset from left edge (0-50%)
  y_offset_pct: 20.0 # Y offset from top edge (0-50%)
  width_pct: 40.0 # Zone width as percentage of frame (20-80%)
  height_pct: 60.0 # Zone height as percentage of frame (20-80%)

# Tracking Configuration
tracking:
  max_age: 30 # Maximum frames to keep track without detection
  min_hits: 1 # Minimum detections before confirming track
  iou_threshold: 0.3 # IoU threshold for matching detections
  max_tracks: 10 # Reduced from 20 (masih cukup untuk konveyor)
  max_classification_attempts: 2 # TETAP 2 untuk akurasi

# Cache Configuration
cache:
  max_size: 100 # TETAP 100 untuk cache yang baik

# Classification Configuration
classification:
  confidence_threshold: 0.45 # TETAP untuk akurasi
  expand_bbox_ratio: 0.1 # TETAP untuk crop yang baik
  min_crop_size: 224 # TETAP untuk kualitas input DINOv3
  enable_temporal_smoothing: true # TETAP AKTIF untuk akurasi lebih baik
  temporal_window_size: 5 # TETAP untuk smoothing yang baik
  enable_preprocessing: true # TETAP AKTIF untuk akurasi maksimal
  enable_ensemble: false # Tetap false (terlalu lambat)
  skip_frames: 1 # Detect setiap 2 frame (kompromi terbaik: 2x faster, akurasi tetap)
  show_overlay: false # Matikan overlay (hemat 4ms per frame)

# Model Paths
models:
  yolo_path: "best.pt"
  dinov3_model: "facebook/dinov3-convnext-small-pretrain-lvd1689m"
  encoder_path: "dinov3_multilabel_encoder.pkl"
  mapping_path: "label_mapping_dict.joblib"
  classifiers_dir: "OVR_Checkpoints-20251018T053026Z-1-001/OVR_Checkpoints"

# Label Columns (8 attributes for classification)
labels:
  columns:
    - product
    - grade
    - cap
    - label
    - brand
    - type
    - subtype
    - volume

# Display Configuration
display:
  show_trigger_zone: true # Show trigger zone overlay on startup
  show_fps: true # Show FPS counter
  show_statistics: true # Show statistics overlay

# Performance Configuration
performance:
  device: "cpu" # CPU only untuk laptop ini
  warmup_classifiers: true # Warmup untuk prevent lag

# Logging Configuration
logging:
  level: "INFO" # Logging level: DEBUG, INFO, WARNING, ERROR
  log_to_file: false # Save logs to file
  log_file: "ekovision.log" # Log file path (if log_to_file is true)


# STRATEGI OPTIMASI TANPA KEHILANGAN AKURASI:
# ✅ Skip frame detection (1) - Detect setiap 2 frame, tracking mengisi gap
#    → 2x faster, akurasi TETAP karena tracking sangat akurat
# ✅ Matikan overlay - Hemat 4ms per frame
#    → Tidak mempengaruhi akurasi sama sekali
# ✅ Max tracks 10 - Cukup untuk konveyor, lebih efisien
#    → Tidak mempengaruhi akurasi deteksi
# ✅ Preprocessing TETAP AKTIF - Untuk akurasi maksimal
# ✅ Temporal smoothing TETAP AKTIF - Untuk akurasi lebih stabil
# ✅ Resolusi TETAP 640x480 - Untuk deteksi akurat
#
# ESTIMASI: 3-5 FPS (dari 1-2 FPS) TANPA kehilangan akurasi
